window.bioEp = {
    bgEl: {},
    popupEl: {},
    closeBtnEl: {},
    shown: !1,
    overflowDefault: "visible",
    transformDefault: "",
    width: 400,
    height: 220,
    html: "",
    css: "",
    fonts: [],
    delay: 5,
    showOnDelay: !1,
    cookieExp: 30,
    cookieManager: {
        create: function(a, c, d) {
            var b = "";
            d && (b = new Date, b.setTime(b.getTime() + 864E5 * d), b = "; expires=" + b.toGMTString());
            document.cookie = a + "=" + c + b + "; path=/"
        },
        get: function(a) {
            a += "=";
            for (var c = document.cookie.split(";"), d = 0; d < c.length; d++) {
                for (var b = c[d]; " " == b.charAt(0);)
                    b = b.substring(1, b.length);
                if (0 === b.indexOf(a))
                    return b.substring(a.length,
                    b.length)
            }
            return null
        },
        erase: function(a) {
            this.create(a, "", - 1)
        }
    },
    checkCookie: function() {
        if (0 >= this.cookieExp)
            return this.cookieManager.erase("bioep_shown"), !1;
        if ("true" == this.cookieManager.get("bioep_shown"))
            return !0;
        this.cookieManager.create("bioep_shown", "true", this.cookieExp);
        return !1
    },
    addCSS: function() {
        for (var a = 0; a < this.fonts.length; a++) {
            var c = document.createElement("link");
            c.href = this.fonts[a];
            c.type = "text/css";
            c.rel = "stylesheet";
            document.head.appendChild(c)
        }
        a = document.createTextNode("#bio_ep_bg {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; opacity: 0.3; z-index: 10001;}#bio_ep {display: none; position: fixed; width: " +
        this.width + "px; height: " + this.height + "px; font-family: 'Titillium Web', sans-serif; font-size: 16px; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%); background-color: #fff; box-shadow: 0px 1px 4px 0 rgba(0,0,0,0.5); z-index: 10002;}#bio_ep_close {position: absolute; left: 100%; margin: -8px 0 0 -12px; width: 20px; height: 20px; color: #fff; font-size: 12px; font-weight: bold; text-align: center; border-radius: 50%; background-color: #5c5c5c; cursor: pointer;}" + this.css);
        c = document.createElement("style");
        c.type = "text/css";
        c.appendChild(a);
        document.head.insertBefore(c, document.getElementsByTagName("style")[0])
    },
    addPopup: function() {
        this.bgEl = document.createElement("div");
        this.bgEl.id = "bio_ep_bg";
        document.body.appendChild(this.bgEl);
        document.getElementById("bio_ep") ? this.popupEl = document.getElementById("bio_ep") : (this.popupEl = document.createElement("div"), this.popupEl.id = "bio_ep", this.popupEl.innerHTML = this.html, document.body.appendChild(this.popupEl));
        this.closeBtnEl = document.createElement("div");
        this.closeBtnEl.id =
        "bio_ep_close";
        this.closeBtnEl.appendChild(document.createTextNode("X"));
        this.popupEl.insertBefore(this.closeBtnEl, this.popupEl.firstChild)
    },
    showPopup: function() {
        this.shown || (this.bgEl.style.display = "block", this.popupEl.style.display = "block", this.scalePopup(), this.overflowDefault = document.body.style.overflow, document.body.style.overflow = "hidden", this.shown=!0)
    },
    hidePopup: function() {
        this.bgEl.style.display = "none";
        this.popupEl.style.display = "none";
        document.body.style.overflow = this.overflowDefault
    },
    scalePopup: function() {
        var a = bioEp.popupEl.offsetWidth, c = bioEp.popupEl.offsetHeight, d = window.innerWidth, b = window.innerHeight, e = 0, f = 0, g = a / c;
        a > d - 40 && (e = d - 40, f = e / g, f > b - 40 && (f = b - 40, e = f * g));
        0 === f && c > b - 40 && (e = (b - 40) * g);
        a = e / a;
        if (0 >= a || 1 < a)
            a = 1;
        "" === this.transformDefault && (this.transformDefault = window.getComputedStyle(this.popupEl, null).getPropertyValue("transform"));
        this.popupEl.style.transform = this.transformDefault + " scale(" + a + ")"
    },
    loadEvents: function() {
        document.addEventListener("mousemove", function(a) {
            7 >
            a.pageY - (window.pageYOffset || document.documentElement.scrollTop) && bioEp.showPopup()
        });
        this.closeBtnEl.addEventListener("click", function() {
            bioEp.hidePopup()
        });
        window.addEventListener("resize", function() {
            bioEp.scalePopup()
        })
    },
    setOptions: function(a) {
        this.width = "undefined" === typeof a.width ? this.width : a.width;
        this.height = "undefined" === typeof a.height ? this.height : a.height;
        this.html = "undefined" === typeof a.html ? this.html : a.html;
        this.css = "undefined" === typeof a.css ? this.css : a.css;
        this.fonts = "undefined" === typeof a.fonts ?
        this.fonts : a.fonts;
        this.delay = "undefined" === typeof a.delay ? this.delay : a.delay;
        this.showOnDelay = "undefined" === typeof a.showOnDelay ? this.showOnDelay : a.showOnDelay;
        this.cookieExp = "undefined" === typeof a.cookieExp ? this.cookieExp : a.cookieExp
    },
    domReady: function(a) {
        "interactive" === document.readyState || "complete" === document.readyState ? a() : document.addEventListener("DOMContentLoaded", a)
    },
    init: function(a) {
        this.domReady(function() {
            "undefined" !== typeof a && bioEp.setOptions(a);
            bioEp.checkCookie() || (bioEp.addCSS(),
            bioEp.addPopup(), setTimeout(function() {
                bioEp.loadEvents();
                bioEp.showOnDelay && bioEp.showPopup()
            }, 1E3 * bioEp.delay))
        })
    }
};

